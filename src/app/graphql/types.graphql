mutation addUser($name: String!){
  addUser(name: $name) {
    id
    name
    picture_url
    conversations {
      id
      users {
        id
        name
      }
    }
  }
}

mutation addMessage($content: String!, $userIds: [ID!]!, $conversationIds: ID!) {
  addMessage(content: $content, userIds: $userIds, conversationId: $conversationIds) {
    content
    timestamp
    conversation {
      id
    }
  }
}

mutation createConversation($userIds: [ID!]!) {
  createConversation(userIds: $userIds) {
    id
    messages {
      id
      content
    }
    users {
      id
      name
    }
  }
}

mutation addUserToConversation($userId: ID!, $conversationID: ID!) {
  addUserToConversation(userId: $userId, conversationId: $conversationID) {
    id
    name
  }
}

query conversationsByUser($userId: ID!) {
  conversationsByUser(userId: $userId) {
    id
    messages {
      content
      timestamp
    }
    users {
      id
      name
    }
  }
}

query conversationsByUsers($userIds: [ID!]!) {
  conversationsByUsers(userIds: $userIds) {
    id
    messages {
      content
      timestamp
    }
    users {
      id
      name
    }
  }
}

query messages {
  messages {
    content
    timestamp
    user {
      id
      name
      picture_url
    }
  }
}

query users {
  users {
    id
    name
  }
}

subscription messageAdded{
  messageAdded {
    id
    content
    timestamp
    user {
      id
      name
      picture_url
    }
    conversation {
      id
      users {
        id
      }
    }

  }
}

subscription userJoined {
  userConnected {
    id
    name
    picture_url
  }
}
