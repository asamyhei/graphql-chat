mutation addUser($name: String!, $password: String!){
  addUser(name: $name, password: $password) {
    id
    name
    picture_url
    conversations {
      id
      users {
        id
        name
      }
    }
  }
}

mutation addMessage($content: String!, $userId: ID!, $conversationId: ID!) {
  addMessage(content: $content, userId: $userId, conversationId: $conversationId) {
    id
    content
    timestamp
    conversation {
      id
    }
    user {
      id
      name
      picture_url
    }
  }
}

mutation createConversation($userIds: [ID!]!) {
  createConversation(userIds: $userIds) {
    id
    messages {
      id
      content
      user {
        id
        name
        picture_url
      }
    }
    users {
      id
      name
    }
  }
}

mutation addUserToConversation($userId: ID!, $conversationID: ID!) {
  addUserToConversation(userId: $userId, conversationId: $conversationID) {
    id
    name
  }
}

query conversationsByUser($userId: ID!) {
  conversationsByUser(userId: $userId) {
    id
    messages {
      content
      timestamp
    }
    users {
      id
      name
    }
  }
}

query conversationsByUsers($userIds: [ID!]!) {
  conversationsByUsers(userIds: $userIds) {
    id
    messages {
      id
      content
      timestamp
      user {
        id
        picture_url
        name
      }
    }
    users {
      id
      name
      picture_url
    }
  }
}

query messages {
  messages {
    content
    timestamp
    user {
      id
      name
      picture_url
    }
  }
}

query users {
  users {
    id
    name
  }
}

query user($id: ID!) {
  user(id: $id) {
    id
    name
    picture_url
    conversations {
      id
      messages {
        id
        content
        timestamp
        user {
          id
          picture_url
          name
        }
      }
    }
  }
}

query conversation($id: ID!) {
  conversation(id: $id) {
    id
    messages {
      content
      id
      timestamp
      user {
        id
        name
        picture_url
      }
    }
    users {
      id
      name
      picture_url
    }
  }
}

subscription messageAdded{
  messageAdded {
    id
    content
    timestamp
    user {
      id
      name
      picture_url
    }
    conversation {
      id
      users {
        id
      }
    }

  }
}

subscription userJoined {
  userConnected {
    id
    name
    picture_url
  }
}
